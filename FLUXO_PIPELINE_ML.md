# ğŸ”„ Fluxo do Pipeline de Machine Learning - PrevisÃµes MLB

## ğŸ“‹ VisÃ£o Geral do Sistema

Este Ã© um sistema automatizado de machine learning que prevÃª strikeouts de arremessadores da MLB usando dados histÃ³ricos, estatÃ­sticas de equipes e odds de apostas.

---

## ğŸ• Cronograma Automatizado

```
ğŸ• 19:10 ET - Pipeline de Dados
ğŸ• 22:40 ET - Email de PrevisÃµes  
ğŸ• 11:42 ET - Email de Resultados
ğŸ• 12:00 ET - Upload AWS
ğŸ• 13:00 ET - Limpeza de Arquivos
ğŸ• 22:45 ET - NotificaÃ§Ã£o Telegram
```

---

## ğŸ”„ Fluxo Principal do Pipeline

### 1ï¸âƒ£ **Coleta de Dados** (19:10 ET)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COLETA DE DADOS                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š betting_odds_today.py                                    â”‚
â”‚    â””â”€ Scraping de odds de apostas do dia                    â”‚
â”‚                                                             â”‚
â”‚ ğŸŸï¸ get_pitcher_lastseason.py                               â”‚
â”‚    â””â”€ Dados histÃ³ricos dos arremessadores                   â”‚
â”‚                                                             â”‚
â”‚ ğŸ“ˆ get_pitcher_lastgame.py                                  â”‚
â”‚    â””â”€ Resultados dos jogos anteriores                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2ï¸âƒ£ **Processamento de Dados** 
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                PROCESSAMENTO DE DADOS                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ data_utils.py                                            â”‚
â”‚    â”œâ”€ Carrega dados dos CSVs                                â”‚
â”‚    â”œâ”€ Merge de datasets                                     â”‚
â”‚    â”œâ”€ CÃ¡lculo de mÃ©tricas (SO_per_IP, BB_per_IP, K-BB%)    â”‚
â”‚    â””â”€ Tratamento de valores nulos/infinitos                â”‚
â”‚                                                             â”‚
â”‚ ğŸ”§ feature_engineering.py                                   â”‚
â”‚    â”œâ”€ CÃ¡lculo de performance ponderada                      â”‚
â”‚    â”œâ”€ MÃ©dias mÃ³veis (5 e 10 jogos)                         â”‚
â”‚    â”œâ”€ Splits casa/fora                                      â”‚
â”‚    â””â”€ Engenharia de features avanÃ§adas                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3ï¸âƒ£ **Treinamento do Modelo**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 TREINAMENTO DO MODELO                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¤– model_training.py                                        â”‚
â”‚    â”œâ”€ Random Forest                                         â”‚
â”‚    â”œâ”€ XGBoost                                              â”‚
â”‚    â”œâ”€ LightGBM                                             â”‚
â”‚    â”œâ”€ Gradient Boosting                                     â”‚
â”‚    â”œâ”€ Cross-validation (5-fold)                            â”‚
â”‚    â”œâ”€ SeleÃ§Ã£o do melhor modelo                             â”‚
â”‚    â””â”€ AvaliaÃ§Ã£o de performance                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4ï¸âƒ£ **GeraÃ§Ã£o de PrevisÃµes**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                GERAÃ‡ÃƒO DE PREVISÃ•ES                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¯ predictions.py                                           â”‚
â”‚    â”œâ”€ PrediÃ§Ã£o de strikeouts por arremessador              â”‚
â”‚    â”œâ”€ CÃ¡lculo de confianÃ§a                                  â”‚
â”‚    â”œâ”€ RecomendaÃ§Ã£o Over/Under                              â”‚
â”‚    â”œâ”€ Filtragem de picks de qualidade                      â”‚
â”‚    â””â”€ GeraÃ§Ã£o do arquivo predicted_YYYY-MM-DD.csv          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“§ Sistema de NotificaÃ§Ãµes

### 5ï¸âƒ£ **Email de PrevisÃµes** (22:40 ET)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 EMAIL DE PREVISÃ•ES                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“§ email_ml_predictions.py                                  â”‚
â”‚    â”œâ”€ Leitura do arquivo predicted_YYYY-MM-DD.csv          â”‚
â”‚    â”œâ”€ FormataÃ§Ã£o em HTML                                    â”‚
â”‚    â”œâ”€ Top picks destacados                                  â”‚
â”‚    â”œâ”€ MÃ©tricas de confianÃ§a                                 â”‚
â”‚    â””â”€ Envio via SMTP                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6ï¸âƒ£ **Email de Resultados** (11:42 ET)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 EMAIL DE RESULTADOS                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š email_ml_results.py                                      â”‚
â”‚    â”œâ”€ ComparaÃ§Ã£o previsÃµes vs resultados                   â”‚
â”‚    â”œâ”€ AnÃ¡lise de performance                               â”‚
â”‚    â”œâ”€ EstatÃ­sticas de acerto                               â”‚
â”‚    â”œâ”€ ROI das apostas                                      â”‚
â”‚    â””â”€ RelatÃ³rio detalhado                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ServiÃ§os Auxiliares

### 7ï¸âƒ£ **Upload AWS** (12:00 ET)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UPLOAD AWS                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜ï¸ aws_upload.py                                            â”‚
â”‚    â”œâ”€ Upload de resultados para S3                          â”‚
â”‚    â”œâ”€ Backup de dados histÃ³ricos                            â”‚
â”‚    â”œâ”€ OrganizaÃ§Ã£o por data                                  â”‚
â”‚    â””â”€ Logs de upload                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8ï¸âƒ£ **Limpeza de Arquivos** (13:00 ET)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                LIMPEZA DE ARQUIVOS                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ§¹ cleanup_files.py                                         â”‚
â”‚    â”œâ”€ RemoÃ§Ã£o de CSVs antigos                              â”‚
â”‚    â”œâ”€ ManutenÃ§Ã£o de espaÃ§o em disco                        â”‚
â”‚    â”œâ”€ PreservaÃ§Ã£o de dados importantes                     â”‚
â”‚    â””â”€ Logs de limpeza                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9ï¸âƒ£ **Telegram Bot** (22:45 ET)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   TELEGRAM BOT                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¤– telegramSender.py                                        â”‚
â”‚    â”œâ”€ Leitura das previsÃµes                                â”‚
â”‚    â”œâ”€ FormataÃ§Ã£o para Telegram                              â”‚
â”‚    â”œâ”€ Envio de mensagens                                    â”‚
â”‚    â”œâ”€ InteraÃ§Ã£o com usuÃ¡rios                                â”‚
â”‚    â””â”€ Logs de envio                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Features do Modelo

### ğŸ¯ **Features Principais**
- **IP**: Innings pitched
- **H**: Hits allowed  
- **BB**: Walks
- **ERA**: Earned run average
- **FIP**: Fielding independent pitching
- **SO_per_IP**: Strikeouts por inning
- **BB_per_IP**: Walks por inning
- **K-BB%**: DiferenÃ§a entre K e BB por inning

### ğŸ“ˆ **Features AvanÃ§adas**
- **SO_rolling_5**: MÃ©dia mÃ³vel de 5 jogos
- **SO_rolling_10**: MÃ©dia mÃ³vel de 10 jogos
- **Home/Away splits**: Performance casa vs fora
- **Team_K%**: % de strikeouts da equipe
- **Opp_K%**: % de strikeouts do oponente

---

## ğŸ”„ Fluxo de Dados Completo

```
ğŸ“Š Dados Brutos
    â†“
ğŸ”§ Engenharia de Features
    â†“
ğŸ¤– Treinamento do Modelo
    â†“
ğŸ¯ GeraÃ§Ã£o de PrevisÃµes
    â†“
ğŸ“§ NotificaÃ§Ãµes (Email + Telegram)
    â†“
ğŸ“ˆ AnÃ¡lise de Resultados
    â†“
â˜ï¸ Backup AWS
    â†“
ğŸ§¹ Limpeza
```

---

## ğŸ› ï¸ Tecnologias Utilizadas

- **Python**: Linguagem principal
- **Pandas**: ManipulaÃ§Ã£o de dados
- **Scikit-learn**: Machine learning
- **XGBoost/LightGBM**: Modelos avanÃ§ados
- **APScheduler**: Agendamento de tarefas
- **Selenium**: Web scraping
- **SMTP**: Envio de emails
- **AWS S3**: Armazenamento em nuvem
- **Telegram Bot API**: NotificaÃ§Ãµes

---

## ğŸ“ˆ MÃ©tricas de Performance

- **RÂ² Score**: Medida de qualidade do modelo
- **MAE**: Erro absoluto mÃ©dio
- **Cross-validation**: ValidaÃ§Ã£o robusta
- **Confidence Score**: NÃ­vel de confianÃ§a das previsÃµes
- **ROI**: Retorno sobre investimento das apostas

---

## ğŸ” Monitoramento

- **Logs detalhados**: pipeline.log
- **MÃ©tricas de performance**: AvaliaÃ§Ã£o contÃ­nua
- **Alertas de erro**: NotificaÃ§Ãµes em caso de falha
- **Backup automÃ¡tico**: PreservaÃ§Ã£o de dados
- **Limpeza programada**: ManutenÃ§Ã£o do sistema 